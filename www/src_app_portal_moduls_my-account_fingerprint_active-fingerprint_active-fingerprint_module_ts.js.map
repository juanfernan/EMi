{"version":3,"file":"src_app_portal_moduls_my-account_fingerprint_active-fingerprint_active-fingerprint_module_ts.js","mappings":"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","sources":["./src/app/portal/moduls/my-account/fingerprint/active-fingerprint/active-fingerprint-routing.module.ts","./src/app/portal/moduls/my-account/fingerprint/active-fingerprint/active-fingerprint.module.ts","./src/app/portal/moduls/my-account/fingerprint/active-fingerprint/active-fingerprint.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ActiveFingerprintPage } from './active-fingerprint.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ActiveFingerprintPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ActiveFingerprintPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule  } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ActiveFingerprintPageRoutingModule } from './active-fingerprint-routing.module';\n\nimport { ActiveFingerprintPage } from './active-fingerprint.page';\nimport { FingerprintAIO } from '@ionic-native/fingerprint-aio/ngx';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    SharedModule,\n    ActiveFingerprintPageRoutingModule\n  ],\n  declarations: [\n    ActiveFingerprintPage],\n  providers:[\n    FingerprintAIO\n  ]\n})\nexport class ActiveFingerprintPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ButtonType } from 'src/app/shared/enums/enumerations';\nimport { ButtonConfiguration } from 'src/app/shared/models/button-configuration';\nimport { environment } from 'src/environments/environment';\n\nimport { Credentials, NativeBiometric } from 'capacitor-native-biometric-auth';\nimport { InformativeModalComponent } from 'src/app/shared/components/informative-modal/informative-modal.component';\nimport { BsModalRef, BsModalService, ModalOptions } from 'ngx-bootstrap/modal';\n\n\n@Component({\n  selector: 'app-active-fingerprint',\n  templateUrl: './active-fingerprint.page.html',\n  styleUrls: ['./active-fingerprint.page.scss'],\n})\nexport class ActiveFingerprintPage implements OnInit {\n\n  imgRoute: string;\n  activateOrDeactivateButton = new ButtonConfiguration();\n  configurationButtonCancel = new ButtonConfiguration();\n  activateOrDeactivateButtonText: string;\n  buttonCancelText: string ;\n  email:string;\n  password: string ;\n  bsModalRef: BsModalRef;\n  \n\n  constructor(\n    private bsModalService: BsModalService,\n    private router: Router,\n    private translate: TranslateService, \n  ) {\n    this.getData()\n    this.imgRoute = environment.imagesRoute;\n    this.translate.get('PORTAL.FINGERPRINT.CloseButton').subscribe(resp => {\n    this.buttonCancelText = resp;\n    });\n  }\n\n  ngOnInit() {\n    this.activateOrDeactivateButton.buttonType = ButtonType.Primary;\n    this.activateOrDeactivateButton.width = '250px'\n    this.configurationButtonCancel.buttonType = ButtonType.Tertiary;\n    this.configurationButtonCancel.text = this.buttonCancelText;\n    this.configurationButtonCancel.width = '250px'\n  }\n  \n  getData(){\n    NativeBiometric.getCredentials({\n      server: \"www.example.com\",\n    }).then(\n      (result: Credentials) => {\n        this.translate.get('PORTAL.FINGERPRINT.DeactivateFinger').subscribe(resp => {\n          this.activateOrDeactivateButton.text = resp;\n          });\n        this.email = result.username\n        this.password = result.password\n      },\n        (result: Credentials) => {\n          this.translate.get('PORTAL.FINGERPRINT.ActivateFinger').subscribe(resp => {\n            this.activateOrDeactivateButton.text = resp;\n            });\n        this.email = result.username\n        this.password = result.password\n    })\n  }\n\n\n  activateOrDeactivate(){\n        if (this.email != undefined ) {\n          this.deleteCredentials();\n        } \n        else{\n          this.saveCredentials();\n        } \n          this.getData()\n  }\n\n  // Save user's credentials\n  saveCredentials(){\n    NativeBiometric.setCredentials({\n      username: localStorage.getItem(\"userName\"),\n      password: localStorage.getItem(\"passwordUser\"),\n      server: \"www.example.com\",\n    })\n      .then((credentials: Credentials) => {\n            // Authenticate using biometrics before logging the user in\n            NativeBiometric.verifyIdentity({\n              reason: \"For easy log in\",\n              title: \"Iniciar Sesión\",\n              subtitle: \"Falck\",\n              description: \"\",\n              retries: 5,\n            }).then(\n            ()=> {this.showActivateMessageModal()\n            },\n            () => {\n              NativeBiometric.deleteCredentials({\n                server: \"www.example.com\",\n              })\n              this.email = undefined,\n              this.translate.get('PORTAL.FINGERPRINT.ActivateFinger').subscribe(resp => {\n                this.activateOrDeactivateButton.text = resp;\n                });\n                \n              }\n            );\n      })\n      this.getData()\n  }  \n  \n  \n  // Delete user's credentials\n  deleteCredentials(){\n    this.getData()\n    NativeBiometric.deleteCredentials({\n      server: \"www.example.com\",\n    })\n      .then(()=>this.showDeactivateMessageModal())\n  }\n\n  showActivateMessageModal() {\n    this.getData()\n    const initialState: ModalOptions = {\n      initialState: {\n        iconHeader: 'alert-check.svg',\n        subTitle: 'Activado',\n        description: 'Inicio de sesión por huella habilitada ',\n        onlyButtonConfirm: true,\n        textButton: 'Aceptar',\n        textButton1: '',\n        textButton2: '',\n        visibleButtonClose: false,\n      },\n      class: 'modal-dialog-centered modal-rounded',\n      id: 1\n    }\n    this.bsModalRef = this.bsModalService.show(InformativeModalComponent, initialState);\n    this.bsModalRef.content.onClose.subscribe(() => {\n    });\n  }\n\n  showDeactivateMessageModal() {\n    const initialState: ModalOptions = {\n      initialState: {\n        iconHeader: 'alert-circle.svg',\n        subTitle: 'Desactivado',\n        description: 'Inicio de sesión por huella no habilitada ',\n        onlyButtonConfirm: true,\n        textButton: 'Aceptar',\n        textButton1: '',\n        textButton2: '',\n        visibleButtonClose: false,\n      },\n      class: 'modal-dialog-centered modal-rounded',\n      id: 1\n    }\n    this.bsModalRef = this.bsModalService.show(InformativeModalComponent, initialState);\n    this.bsModalRef.content.onClose.subscribe(() => {\n    });\n  }\n\n   cancel() {\n    this.router.navigate(['portal/home'], { replaceUrl: true });\n  }\n\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}