import { HttpErrorResponse } from '@angular/common/http';
import { Inject, Injectable } from '@angular/core';
import * as Sentry from '@sentry/browser';
import { captureException } from '@sentry/browser';
import { addExceptionMechanism } from '@sentry/utils';
import { runOutsideAngular } from './zone';
import * as i0 from "@angular/core";
/**
 * Implementation of Angular's ErrorHandler provider that can be used as a drop-in replacement for the stock one.
 */
class SentryErrorHandler {
    constructor(options) {
        this._options = Object.assign({ logErrors: true }, options);
    }
    /**
     * Method called for every value captured through the ErrorHandler
     */
    handleError(error) {
        const extractedError = this._extractError(error) || 'Handled unknown error';
        // Capture handled exception and send it to Sentry.
        const eventId = runOutsideAngular(() => captureException(extractedError, scope => {
            scope.addEventProcessor(event => {
                addExceptionMechanism(event, {
                    type: 'angular',
                    handled: false,
                });
                return event;
            });
            return scope;
        }));
        // When in development mode, log the error to console for immediate feedback.
        if (this._options.logErrors) {
            // eslint-disable-next-line no-console
            console.error(extractedError);
        }
        // Optionally show user dialog to provide details on what happened.
        if (this._options.showDialog) {
            Sentry.showReportDialog(Object.assign(Object.assign({}, this._options.dialogOptions), { eventId }));
        }
    }
    /**
     * Used to pull a desired value that will be used to capture an event out of the raw value captured by ErrorHandler.
     */
    _extractError(error) {
        // Allow custom overrides of extracting function
        if (this._options.extractor) {
            const defaultExtractor = this._defaultExtractor.bind(this);
            return this._options.extractor(error, defaultExtractor);
        }
        return this._defaultExtractor(error);
    }
    /**
     * Default implementation of error extraction that handles default error wrapping, HTTP responses, ErrorEvent and few other known cases.
     */
    _defaultExtractor(errorCandidate) {
        let error = errorCandidate;
        // Try to unwrap zone.js error.
        // https://github.com/angular/angular/blob/master/packages/core/src/util/errors.ts
        if (error && error.ngOriginalError) {
            error = error.ngOriginalError;
        }
        // We can handle messages and Error objects directly.
        if (typeof error === 'string' || error instanceof Error) {
            return error;
        }
        // If it's http module error, extract as much information from it as we can.
        if (error instanceof HttpErrorResponse) {
            // The `error` property of http exception can be either an `Error` object, which we can use directly...
            if (error.error instanceof Error) {
                return error.error;
            }
            // ... or an`ErrorEvent`, which can provide us with the message but no stack...
            if (error.error instanceof ErrorEvent && error.error.message) {
                return error.error.message;
            }
            // ...or the request body itself, which we can use as a message instead.
            if (typeof error.error === 'string') {
                return `Server returned code ${error.status} with body "${error.error}"`;
            }
            // If we don't have any detailed information, fallback to the request message itself.
            return error.message;
        }
        // Nothing was extracted, fallback to default error message.
        return null;
    }
}
SentryErrorHandler.ɵprov = i0.ɵɵdefineInjectable({ factory: function SentryErrorHandler_Factory() { return new SentryErrorHandler(i0.ɵɵinject("errorHandlerOptions")); }, token: SentryErrorHandler, providedIn: "root" });
SentryErrorHandler.decorators = [
    { type: Injectable, args: [{ providedIn: 'root' },] }
];
SentryErrorHandler.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: ['errorHandlerOptions',] }] }
];
/**
 * Factory function that creates an instance of a preconfigured ErrorHandler provider.
 */
function createErrorHandler(config) {
    return new SentryErrorHandler(config);
}
export { createErrorHandler, SentryErrorHandler };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3JoYW5kbGVyLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3J1bm5lci93b3JrL3NlbnRyeS1qYXZhc2NyaXB0L3NlbnRyeS1qYXZhc2NyaXB0L3BhY2thZ2VzL2FuZ3VsYXIvc3JjLyIsInNvdXJjZXMiOlsiZXJyb3JoYW5kbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3pELE9BQU8sRUFBdUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN4RixPQUFPLEtBQUssTUFBTSxNQUFNLGlCQUFpQixDQUFDO0FBQzFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV0RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxRQUFRLENBQUM7O0FBaUIzQzs7R0FFRztBQUNILE1BQ00sa0JBQWtCO0lBR3RCLFlBQWtELE9BQTZCO1FBQzdFLElBQUksQ0FBQyxRQUFRLG1CQUNYLFNBQVMsRUFBRSxJQUFJLElBQ1osT0FBTyxDQUNYLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSSxXQUFXLENBQUMsS0FBYztRQUMvQixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxJQUFJLHVCQUF1QixDQUFDO1FBRTVFLG1EQUFtRDtRQUNuRCxNQUFNLE9BQU8sR0FBRyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUUsQ0FDckMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQyxFQUFFO1lBQ3ZDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDOUIscUJBQXFCLENBQUMsS0FBSyxFQUFFO29CQUMzQixJQUFJLEVBQUUsU0FBUztvQkFDZixPQUFPLEVBQUUsS0FBSztpQkFDZixDQUFDLENBQUM7Z0JBRUgsT0FBTyxLQUFLLENBQUM7WUFDZixDQUFDLENBQUMsQ0FBQztZQUVILE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQyxDQUFDLENBQ0gsQ0FBQztRQUVGLDZFQUE2RTtRQUM3RSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFO1lBQzNCLHNDQUFzQztZQUN0QyxPQUFPLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQy9CO1FBRUQsbUVBQW1FO1FBQ25FLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUU7WUFDNUIsTUFBTSxDQUFDLGdCQUFnQixpQ0FBTSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsS0FBRSxPQUFPLElBQUcsQ0FBQztTQUN0RTtJQUNILENBQUM7SUFFRDs7T0FFRztJQUNPLGFBQWEsQ0FBQyxLQUFjO1FBQ3BDLGdEQUFnRDtRQUNoRCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFO1lBQzNCLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMzRCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1NBQ3pEO1FBRUQsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVEOztPQUVHO0lBQ08saUJBQWlCLENBQUMsY0FBdUI7UUFDakQsSUFBSSxLQUFLLEdBQUcsY0FBYyxDQUFDO1FBRTNCLCtCQUErQjtRQUMvQixrRkFBa0Y7UUFDbEYsSUFBSSxLQUFLLElBQUssS0FBb0MsQ0FBQyxlQUFlLEVBQUU7WUFDbEUsS0FBSyxHQUFJLEtBQW9DLENBQUMsZUFBZSxDQUFDO1NBQy9EO1FBRUQscURBQXFEO1FBQ3JELElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxJQUFJLEtBQUssWUFBWSxLQUFLLEVBQUU7WUFDdkQsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELDRFQUE0RTtRQUM1RSxJQUFJLEtBQUssWUFBWSxpQkFBaUIsRUFBRTtZQUN0Qyx1R0FBdUc7WUFDdkcsSUFBSSxLQUFLLENBQUMsS0FBSyxZQUFZLEtBQUssRUFBRTtnQkFDaEMsT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDO2FBQ3BCO1lBRUQsK0VBQStFO1lBQy9FLElBQUksS0FBSyxDQUFDLEtBQUssWUFBWSxVQUFVLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7Z0JBQzVELE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7YUFDNUI7WUFFRCx3RUFBd0U7WUFDeEUsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLEtBQUssUUFBUSxFQUFFO2dCQUNuQyxPQUFPLHdCQUF3QixLQUFLLENBQUMsTUFBTSxlQUFlLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQzthQUMxRTtZQUVELHFGQUFxRjtZQUNyRixPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUM7U0FDdEI7UUFFRCw0REFBNEQ7UUFDNUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDOzs7O1lBbEdGLFVBQVUsU0FBQyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUU7Ozs0Q0FJWixNQUFNLFNBQUMscUJBQXFCOztBQWlHbEQ7O0dBRUc7QUFDSCxTQUFTLGtCQUFrQixDQUFDLE1BQTRCO0lBQ3RELE9BQU8sSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4QyxDQUFDO0FBRUQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwRXJyb3JSZXNwb25zZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciBhcyBBbmd1bGFyRXJyb3JIYW5kbGVyLCBJbmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIFNlbnRyeSBmcm9tICdAc2VudHJ5L2Jyb3dzZXInO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gJ0BzZW50cnkvYnJvd3Nlcic7XG5pbXBvcnQgeyBhZGRFeGNlcHRpb25NZWNoYW5pc20gfSBmcm9tICdAc2VudHJ5L3V0aWxzJztcblxuaW1wb3J0IHsgcnVuT3V0c2lkZUFuZ3VsYXIgfSBmcm9tICcuL3pvbmUnO1xuXG4vKipcbiAqIE9wdGlvbnMgdXNlZCB0byBjb25maWd1cmUgdGhlIGJlaGF2aW9yIG9mIHRoZSBBbmd1bGFyIEVycm9ySGFuZGxlci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFcnJvckhhbmRsZXJPcHRpb25zIHtcbiAgbG9nRXJyb3JzPzogYm9vbGVhbjtcbiAgc2hvd0RpYWxvZz86IGJvb2xlYW47XG4gIGRpYWxvZ09wdGlvbnM/OiBTZW50cnkuUmVwb3J0RGlhbG9nT3B0aW9ucztcbiAgLyoqXG4gICAqIEN1c3RvbSBpbXBsZW1lbnRhdGlvbiBvZiBlcnJvciBleHRyYWN0aW9uIGZyb20gdGhlIHJhdyB2YWx1ZSBjYXB0dXJlZCBieSB0aGUgQW5ndWxhci5cbiAgICogQHBhcmFtIGVycm9yIFZhbHVlIGNhcHR1cmVkIGJ5IEFuZ3VsYXIncyBFcnJvckhhbmRsZXIgcHJvdmlkZXJcbiAgICogQHBhcmFtIGRlZmF1bHRFeHRyYWN0b3IgRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB0aGF0IGNhbiBiZSB1c2VkIGFzIHRoZSBmYWxsYmFjayBpbiBjYXNlIG9mIGN1c3RvbSBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgZXh0cmFjdG9yPyhlcnJvcjogdW5rbm93biwgZGVmYXVsdEV4dHJhY3RvcjogKGVycm9yOiB1bmtub3duKSA9PiB1bmtub3duKTogdW5rbm93bjtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBBbmd1bGFyJ3MgRXJyb3JIYW5kbGVyIHByb3ZpZGVyIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBkcm9wLWluIHJlcGxhY2VtZW50IGZvciB0aGUgc3RvY2sgb25lLlxuICovXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuY2xhc3MgU2VudHJ5RXJyb3JIYW5kbGVyIGltcGxlbWVudHMgQW5ndWxhckVycm9ySGFuZGxlciB7XG4gIHByb3RlY3RlZCByZWFkb25seSBfb3B0aW9uczogRXJyb3JIYW5kbGVyT3B0aW9ucztcblxuICBwdWJsaWMgY29uc3RydWN0b3IoQEluamVjdCgnZXJyb3JIYW5kbGVyT3B0aW9ucycpIG9wdGlvbnM/OiBFcnJvckhhbmRsZXJPcHRpb25zKSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IHtcbiAgICAgIGxvZ0Vycm9yczogdHJ1ZSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZXRob2QgY2FsbGVkIGZvciBldmVyeSB2YWx1ZSBjYXB0dXJlZCB0aHJvdWdoIHRoZSBFcnJvckhhbmRsZXJcbiAgICovXG4gIHB1YmxpYyBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IHZvaWQge1xuICAgIGNvbnN0IGV4dHJhY3RlZEVycm9yID0gdGhpcy5fZXh0cmFjdEVycm9yKGVycm9yKSB8fCAnSGFuZGxlZCB1bmtub3duIGVycm9yJztcblxuICAgIC8vIENhcHR1cmUgaGFuZGxlZCBleGNlcHRpb24gYW5kIHNlbmQgaXQgdG8gU2VudHJ5LlxuICAgIGNvbnN0IGV2ZW50SWQgPSBydW5PdXRzaWRlQW5ndWxhcigoKSA9PlxuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihleHRyYWN0ZWRFcnJvciwgc2NvcGUgPT4ge1xuICAgICAgICBzY29wZS5hZGRFdmVudFByb2Nlc3NvcihldmVudCA9PiB7XG4gICAgICAgICAgYWRkRXhjZXB0aW9uTWVjaGFuaXNtKGV2ZW50LCB7XG4gICAgICAgICAgICB0eXBlOiAnYW5ndWxhcicsXG4gICAgICAgICAgICBoYW5kbGVkOiBmYWxzZSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBldmVudDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNjb3BlO1xuICAgICAgfSksXG4gICAgKTtcblxuICAgIC8vIFdoZW4gaW4gZGV2ZWxvcG1lbnQgbW9kZSwgbG9nIHRoZSBlcnJvciB0byBjb25zb2xlIGZvciBpbW1lZGlhdGUgZmVlZGJhY2suXG4gICAgaWYgKHRoaXMuX29wdGlvbnMubG9nRXJyb3JzKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5lcnJvcihleHRyYWN0ZWRFcnJvcik7XG4gICAgfVxuXG4gICAgLy8gT3B0aW9uYWxseSBzaG93IHVzZXIgZGlhbG9nIHRvIHByb3ZpZGUgZGV0YWlscyBvbiB3aGF0IGhhcHBlbmVkLlxuICAgIGlmICh0aGlzLl9vcHRpb25zLnNob3dEaWFsb2cpIHtcbiAgICAgIFNlbnRyeS5zaG93UmVwb3J0RGlhbG9nKHsgLi4udGhpcy5fb3B0aW9ucy5kaWFsb2dPcHRpb25zLCBldmVudElkIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIHB1bGwgYSBkZXNpcmVkIHZhbHVlIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNhcHR1cmUgYW4gZXZlbnQgb3V0IG9mIHRoZSByYXcgdmFsdWUgY2FwdHVyZWQgYnkgRXJyb3JIYW5kbGVyLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9leHRyYWN0RXJyb3IoZXJyb3I6IHVua25vd24pOiB1bmtub3duIHtcbiAgICAvLyBBbGxvdyBjdXN0b20gb3ZlcnJpZGVzIG9mIGV4dHJhY3RpbmcgZnVuY3Rpb25cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5leHRyYWN0b3IpIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRFeHRyYWN0b3IgPSB0aGlzLl9kZWZhdWx0RXh0cmFjdG9yLmJpbmQodGhpcyk7XG4gICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5leHRyYWN0b3IoZXJyb3IsIGRlZmF1bHRFeHRyYWN0b3IpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9kZWZhdWx0RXh0cmFjdG9yKGVycm9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGVycm9yIGV4dHJhY3Rpb24gdGhhdCBoYW5kbGVzIGRlZmF1bHQgZXJyb3Igd3JhcHBpbmcsIEhUVFAgcmVzcG9uc2VzLCBFcnJvckV2ZW50IGFuZCBmZXcgb3RoZXIga25vd24gY2FzZXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2RlZmF1bHRFeHRyYWN0b3IoZXJyb3JDYW5kaWRhdGU6IHVua25vd24pOiB1bmtub3duIHtcbiAgICBsZXQgZXJyb3IgPSBlcnJvckNhbmRpZGF0ZTtcblxuICAgIC8vIFRyeSB0byB1bndyYXAgem9uZS5qcyBlcnJvci5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2NvcmUvc3JjL3V0aWwvZXJyb3JzLnRzXG4gICAgaWYgKGVycm9yICYmIChlcnJvciBhcyB7IG5nT3JpZ2luYWxFcnJvcjogRXJyb3IgfSkubmdPcmlnaW5hbEVycm9yKSB7XG4gICAgICBlcnJvciA9IChlcnJvciBhcyB7IG5nT3JpZ2luYWxFcnJvcjogRXJyb3IgfSkubmdPcmlnaW5hbEVycm9yO1xuICAgIH1cblxuICAgIC8vIFdlIGNhbiBoYW5kbGUgbWVzc2FnZXMgYW5kIEVycm9yIG9iamVjdHMgZGlyZWN0bHkuXG4gICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgfHwgZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cblxuICAgIC8vIElmIGl0J3MgaHR0cCBtb2R1bGUgZXJyb3IsIGV4dHJhY3QgYXMgbXVjaCBpbmZvcm1hdGlvbiBmcm9tIGl0IGFzIHdlIGNhbi5cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBIdHRwRXJyb3JSZXNwb25zZSkge1xuICAgICAgLy8gVGhlIGBlcnJvcmAgcHJvcGVydHkgb2YgaHR0cCBleGNlcHRpb24gY2FuIGJlIGVpdGhlciBhbiBgRXJyb3JgIG9iamVjdCwgd2hpY2ggd2UgY2FuIHVzZSBkaXJlY3RseS4uLlxuICAgICAgaWYgKGVycm9yLmVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLmVycm9yO1xuICAgICAgfVxuXG4gICAgICAvLyAuLi4gb3IgYW5gRXJyb3JFdmVudGAsIHdoaWNoIGNhbiBwcm92aWRlIHVzIHdpdGggdGhlIG1lc3NhZ2UgYnV0IG5vIHN0YWNrLi4uXG4gICAgICBpZiAoZXJyb3IuZXJyb3IgaW5zdGFuY2VvZiBFcnJvckV2ZW50ICYmIGVycm9yLmVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLmVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG5cbiAgICAgIC8vIC4uLm9yIHRoZSByZXF1ZXN0IGJvZHkgaXRzZWxmLCB3aGljaCB3ZSBjYW4gdXNlIGFzIGEgbWVzc2FnZSBpbnN0ZWFkLlxuICAgICAgaWYgKHR5cGVvZiBlcnJvci5lcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGBTZXJ2ZXIgcmV0dXJuZWQgY29kZSAke2Vycm9yLnN0YXR1c30gd2l0aCBib2R5IFwiJHtlcnJvci5lcnJvcn1cImA7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW55IGRldGFpbGVkIGluZm9ybWF0aW9uLCBmYWxsYmFjayB0byB0aGUgcmVxdWVzdCBtZXNzYWdlIGl0c2VsZi5cbiAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlO1xuICAgIH1cblxuICAgIC8vIE5vdGhpbmcgd2FzIGV4dHJhY3RlZCwgZmFsbGJhY2sgdG8gZGVmYXVsdCBlcnJvciBtZXNzYWdlLlxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRmFjdG9yeSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYSBwcmVjb25maWd1cmVkIEVycm9ySGFuZGxlciBwcm92aWRlci5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRXJyb3JIYW5kbGVyKGNvbmZpZz86IEVycm9ySGFuZGxlck9wdGlvbnMpOiBTZW50cnlFcnJvckhhbmRsZXIge1xuICByZXR1cm4gbmV3IFNlbnRyeUVycm9ySGFuZGxlcihjb25maWcpO1xufVxuXG5leHBvcnQgeyBjcmVhdGVFcnJvckhhbmRsZXIsIFNlbnRyeUVycm9ySGFuZGxlciB9O1xuIl19