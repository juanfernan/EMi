import { VERSION } from '@angular/core';
import { init as browserInit, SDK_VERSION, setContext } from '@sentry/browser';
import { logger } from '@sentry/utils';
import { ANGULAR_MINIMUM_VERSION } from './constants';
import { IS_DEBUG_BUILD } from './flags';
/**
 * Inits the Angular SDK
 */
export function init(options) {
    options._metadata = options._metadata || {};
    options._metadata.sdk = {
        name: 'sentry.javascript.angular',
        packages: [
            {
                name: 'npm:@sentry/angular',
                version: SDK_VERSION,
            },
        ],
        version: SDK_VERSION,
    };
    checkAndSetAngularVersion();
    browserInit(options);
}
function checkAndSetAngularVersion() {
    const angularVersion = VERSION && VERSION.major ? parseInt(VERSION.major, 10) : undefined;
    if (angularVersion) {
        if (angularVersion < ANGULAR_MINIMUM_VERSION) {
            IS_DEBUG_BUILD &&
                logger.warn(`The Sentry SDK does not officially support Angular ${angularVersion}.`, `This version of the Sentry SDK supports Angular ${ANGULAR_MINIMUM_VERSION} and above.`, 'Please consider upgrading your Angular version or downgrading the Sentry SDK.');
        }
        setContext('angular', { version: angularVersion });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2RrLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3J1bm5lci93b3JrL3NlbnRyeS1qYXZhc2NyaXB0L3NlbnRyeS1qYXZhc2NyaXB0L3BhY2thZ2VzL2FuZ3VsYXIvc3JjLyIsInNvdXJjZXMiOlsic2RrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEMsT0FBTyxFQUFrQixJQUFJLElBQUksV0FBVyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvRixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXZDLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN0RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBRXpDOztHQUVHO0FBQ0gsTUFBTSxVQUFVLElBQUksQ0FBQyxPQUF1QjtJQUMxQyxPQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxTQUFTLElBQUksRUFBRSxDQUFDO0lBQzVDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFHO1FBQ3RCLElBQUksRUFBRSwyQkFBMkI7UUFDakMsUUFBUSxFQUFFO1lBQ1I7Z0JBQ0UsSUFBSSxFQUFFLHFCQUFxQjtnQkFDM0IsT0FBTyxFQUFFLFdBQVc7YUFDckI7U0FDRjtRQUNELE9BQU8sRUFBRSxXQUFXO0tBQ3JCLENBQUM7SUFFRix5QkFBeUIsRUFBRSxDQUFDO0lBQzVCLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN2QixDQUFDO0FBRUQsU0FBUyx5QkFBeUI7SUFDaEMsTUFBTSxjQUFjLEdBQUcsT0FBTyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFFMUYsSUFBSSxjQUFjLEVBQUU7UUFDbEIsSUFBSSxjQUFjLEdBQUcsdUJBQXVCLEVBQUU7WUFDNUMsY0FBYztnQkFDWixNQUFNLENBQUMsSUFBSSxDQUNULHNEQUFzRCxjQUFjLEdBQUcsRUFDdkUsbURBQW1ELHVCQUF1QixhQUFhLEVBQ3ZGLCtFQUErRSxDQUNoRixDQUFDO1NBQ0w7UUFDRCxVQUFVLENBQUMsU0FBUyxFQUFFLEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxDQUFDLENBQUM7S0FDcEQ7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQnJvd3Nlck9wdGlvbnMsIGluaXQgYXMgYnJvd3NlckluaXQsIFNES19WRVJTSU9OLCBzZXRDb250ZXh0IH0gZnJvbSAnQHNlbnRyeS9icm93c2VyJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0BzZW50cnkvdXRpbHMnO1xuXG5pbXBvcnQgeyBBTkdVTEFSX01JTklNVU1fVkVSU0lPTiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IElTX0RFQlVHX0JVSUxEIH0gZnJvbSAnLi9mbGFncyc7XG5cbi8qKlxuICogSW5pdHMgdGhlIEFuZ3VsYXIgU0RLXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0KG9wdGlvbnM6IEJyb3dzZXJPcHRpb25zKTogdm9pZCB7XG4gIG9wdGlvbnMuX21ldGFkYXRhID0gb3B0aW9ucy5fbWV0YWRhdGEgfHwge307XG4gIG9wdGlvbnMuX21ldGFkYXRhLnNkayA9IHtcbiAgICBuYW1lOiAnc2VudHJ5LmphdmFzY3JpcHQuYW5ndWxhcicsXG4gICAgcGFja2FnZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ25wbTpAc2VudHJ5L2FuZ3VsYXInLFxuICAgICAgICB2ZXJzaW9uOiBTREtfVkVSU0lPTixcbiAgICAgIH0sXG4gICAgXSxcbiAgICB2ZXJzaW9uOiBTREtfVkVSU0lPTixcbiAgfTtcblxuICBjaGVja0FuZFNldEFuZ3VsYXJWZXJzaW9uKCk7XG4gIGJyb3dzZXJJbml0KG9wdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBjaGVja0FuZFNldEFuZ3VsYXJWZXJzaW9uKCk6IHZvaWQge1xuICBjb25zdCBhbmd1bGFyVmVyc2lvbiA9IFZFUlNJT04gJiYgVkVSU0lPTi5tYWpvciA/IHBhcnNlSW50KFZFUlNJT04ubWFqb3IsIDEwKSA6IHVuZGVmaW5lZDtcblxuICBpZiAoYW5ndWxhclZlcnNpb24pIHtcbiAgICBpZiAoYW5ndWxhclZlcnNpb24gPCBBTkdVTEFSX01JTklNVU1fVkVSU0lPTikge1xuICAgICAgSVNfREVCVUdfQlVJTEQgJiZcbiAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgYFRoZSBTZW50cnkgU0RLIGRvZXMgbm90IG9mZmljaWFsbHkgc3VwcG9ydCBBbmd1bGFyICR7YW5ndWxhclZlcnNpb259LmAsXG4gICAgICAgICAgYFRoaXMgdmVyc2lvbiBvZiB0aGUgU2VudHJ5IFNESyBzdXBwb3J0cyBBbmd1bGFyICR7QU5HVUxBUl9NSU5JTVVNX1ZFUlNJT059IGFuZCBhYm92ZS5gLFxuICAgICAgICAgICdQbGVhc2UgY29uc2lkZXIgdXBncmFkaW5nIHlvdXIgQW5ndWxhciB2ZXJzaW9uIG9yIGRvd25ncmFkaW5nIHRoZSBTZW50cnkgU0RLLicsXG4gICAgICAgICk7XG4gICAgfVxuICAgIHNldENvbnRleHQoJ2FuZ3VsYXInLCB7IHZlcnNpb246IGFuZ3VsYXJWZXJzaW9uIH0pO1xuICB9XG59XG4iXX0=